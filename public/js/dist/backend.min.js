$(document).ready(function () {
    var fadeSuccessMessages = function () {
        $(".alert-success").delay(2000).slideUp(500, function () {
            this.remove();
        });
    };
    /** Globaler Message Handler **/
        //AJAX-Response==JSON[msg]?set message
    $(document).ajaxSuccess(function (e, req) {
        if (req.responseJSON && req.responseJSON.msg) {
            var messages = req.responseJSON.msg;
            var messageTypes = {
                error: {
                    typeClass: "alert-danger",
                    title: "Fehler"
                },
                warning: {
                    typeClass: "alert-warning",
                    title: "Achtung"
                },
                success: {
                    typeClass: "alert-success",
                    title: "Erfolg"
                }
            };
            for (var type in messageTypes) {
                messages[type].forEach(function (msg) {
                    var htmlMsg = $('<div class="alert ' + messageTypes[type]["typeClass"] + ' alert-dismissible" role="alert">' +
                    '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
                    '<span aria-hidden="true">&times;</span>' +
                    '</button>' +
                    '<strong>' + messageTypes[type]["title"] + '</strong> ' + msg +
                    '</div>').hide();
                    //Modal-Fenster?
                    var modal = $(".modal-dialog");
                    if (modal.length) {
                        modal.prepend(htmlMsg);
                    } else {
                        $("main").prepend(htmlMsg);
                    }
                    htmlMsg.slideDown(500);
                    //autofadeout vom erfolgsmeldungen
                    fadeSuccessMessages();
                });
            }
        }
    });
    /** Neue Frucht **/
    $(document).on("click", "#newFruitPhoto", function (e) {
        e.preventDefault();
        $("#fruitphoto").trigger("click");
    }).on("change", "#fruitphoto", function () {
        var data = new FormData();
        data.append($(this).attr("name"), this.files[0]);
        $(this).val(""); //IE-Bug

        var formular = $(this).parents("form");
        var targetUrl = formular.attr("action");

        $.ajax({
            url: targetUrl,
            data: data,
            cache: false,
            method: formular.attr("method"),
            contentType: false,
            processData: false,
            type: 'POST',
            success: function (data) {
                if (data.preview && data.token) {
                    $("#fruit_label").attr("src", "data:image/jpg;base64," + data["preview"]);
                    $("#token").val(data.token);
                }
            }
        });
    })
        //Leere Modal-Fenster nach Schlie√üen
        .on("hidden.bs.modal", "#newFruit", function (e) {
            $(e.target).removeData('bs.modal');
        });

    //Lade Bild nicht nochmals hoch
    $('form#fruits').on("submit", function () {
        $(this).find('input[type="file"]').prop("disabled", true);
        return true;
    });

    //colorpicker
    $(function () {
        $('#fruits #color').colorpicker().on("changeColor", function (e) {
            var clr;
            if (e.color != undefined) {
                clr = e.color.toHex();
            } else {
                clr = $(this).val();

            }
            $(this).css({backgroundColor: clr});
        }).trigger("changeColor");
    });
    //confirm
    $('[data-toggle="confirmation"]').confirmation({
            title: "Sind Sie sicher?",
            singleton: true
        }
    );

    //Fadeout on load
    fadeSuccessMessages();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2VuZC5taW4uanMiLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJiYWNrZW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmFkZVN1Y2Nlc3NNZXNzYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIi5hbGVydC1zdWNjZXNzXCIpLmRlbGF5KDIwMDApLnNsaWRlVXAoNTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKiBHbG9iYWxlciBNZXNzYWdlIEhhbmRsZXIgKiovXG4gICAgICAgIC8vQUpBWC1SZXNwb25zZT09SlNPTlttc2ddP3NldCBtZXNzYWdlXG4gICAgJChkb2N1bWVudCkuYWpheFN1Y2Nlc3MoZnVuY3Rpb24gKGUsIHJlcSkge1xuICAgICAgICBpZiAocmVxLnJlc3BvbnNlSlNPTiAmJiByZXEucmVzcG9uc2VKU09OLm1zZykge1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gcmVxLnJlc3BvbnNlSlNPTi5tc2c7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZVR5cGVzID0ge1xuICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVDbGFzczogXCJhbGVydC1kYW5nZXJcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmVobGVyXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZUNsYXNzOiBcImFsZXJ0LXdhcm5pbmdcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQWNodHVuZ1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVDbGFzczogXCJhbGVydC1zdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkVyZm9sZ1wiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIHR5cGUgaW4gbWVzc2FnZVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNbdHlwZV0uZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sTXNnID0gJCgnPGRpdiBjbGFzcz1cImFsZXJ0ICcgKyBtZXNzYWdlVHlwZXNbdHlwZV1bXCJ0eXBlQ2xhc3NcIl0gKyAnIGFsZXJ0LWRpc21pc3NpYmxlXCIgcm9sZT1cImFsZXJ0XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwiYWxlcnRcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2J1dHRvbj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzdHJvbmc+JyArIG1lc3NhZ2VUeXBlc1t0eXBlXVtcInRpdGxlXCJdICsgJzwvc3Ryb25nPiAnICsgbXNnICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy9Nb2RhbC1GZW5zdGVyP1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kYWwgPSAkKFwiLm1vZGFsLWRpYWxvZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGFsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwucHJlcGVuZChodG1sTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJtYWluXCIpLnByZXBlbmQoaHRtbE1zZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaHRtbE1zZy5zbGlkZURvd24oNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgLy9hdXRvZmFkZW91dCB2b20gZXJmb2xnc21lbGR1bmdlblxuICAgICAgICAgICAgICAgICAgICBmYWRlU3VjY2Vzc01lc3NhZ2VzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvKiogTmV1ZSBGcnVjaHQgKiovXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIiNuZXdGcnVpdFBob3RvXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChcIiNmcnVpdHBob3RvXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcbiAgICB9KS5vbihcImNoYW5nZVwiLCBcIiNmcnVpdHBob3RvXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZGF0YS5hcHBlbmQoJCh0aGlzKS5hdHRyKFwibmFtZVwiKSwgdGhpcy5maWxlc1swXSk7XG4gICAgICAgICQodGhpcykudmFsKFwiXCIpOyAvL0lFLUJ1Z1xuXG4gICAgICAgIHZhciBmb3JtdWxhciA9ICQodGhpcykucGFyZW50cyhcImZvcm1cIik7XG4gICAgICAgIHZhciB0YXJnZXRVcmwgPSBmb3JtdWxhci5hdHRyKFwiYWN0aW9uXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHRhcmdldFVybCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICBtZXRob2Q6IGZvcm11bGFyLmF0dHIoXCJtZXRob2RcIiksXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnByZXZpZXcgJiYgZGF0YS50b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2ZydWl0X2xhYmVsXCIpLmF0dHIoXCJzcmNcIiwgXCJkYXRhOmltYWdlL2pwZztiYXNlNjQsXCIgKyBkYXRhW1wicHJldmlld1wiXSk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjdG9rZW5cIikudmFsKGRhdGEudG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSlcbiAgICAgICAgLy9MZWVyZSBNb2RhbC1GZW5zdGVyIG5hY2ggU2NobGllw59lblxuICAgICAgICAub24oXCJoaWRkZW4uYnMubW9kYWxcIiwgXCIjbmV3RnJ1aXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICQoZS50YXJnZXQpLnJlbW92ZURhdGEoJ2JzLm1vZGFsJyk7XG4gICAgICAgIH0pO1xuXG4gICAgLy9MYWRlIEJpbGQgbmljaHQgbm9jaG1hbHMgaG9jaFxuICAgICQoJ2Zvcm0jZnJ1aXRzJykub24oXCJzdWJtaXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJykucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vY29sb3JwaWNrZXJcbiAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2ZydWl0cyAjY29sb3InKS5jb2xvcnBpY2tlcigpLm9uKFwiY2hhbmdlQ29sb3JcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbHI7XG4gICAgICAgICAgICBpZiAoZS5jb2xvciAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjbHIgPSBlLmNvbG9yLnRvSGV4KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsciA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGhpcykuY3NzKHtiYWNrZ3JvdW5kQ29sb3I6IGNscn0pO1xuICAgICAgICB9KS50cmlnZ2VyKFwiY2hhbmdlQ29sb3JcIik7XG4gICAgfSk7XG4gICAgLy9jb25maXJtXG4gICAgJCgnW2RhdGEtdG9nZ2xlPVwiY29uZmlybWF0aW9uXCJdJykuY29uZmlybWF0aW9uKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIlNpbmQgU2llIHNpY2hlcj9cIixcbiAgICAgICAgICAgIHNpbmdsZXRvbjogdHJ1ZVxuICAgICAgICB9XG4gICAgKTtcblxuICAgIC8vRmFkZW91dCBvbiBsb2FkXG4gICAgZmFkZVN1Y2Nlc3NNZXNzYWdlcygpO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=