
$(document).ready(function(){
    /** Globaler Message Handler **/
    //AJAX-Response==JSON[msg]?set message
    $(document).ajaxSuccess(function (e, req) {
        if (req.responseJSON && req.responseJSON.msg && req.responseJSON.msg.success && req.responseJSON.msg.warning && req.responseJSON.msg.error) {
            var messages=req.responseJSON.msg;
            var messageTypes={
                error:{
                    typeClass:"alert-danger",
                    title: "Fehler"
                },
                warning:{
                    typeClass:"alert-warning",
                    title: "Achtung"
                },
                success:{
                    typeClass:"alert-success",
                    title: "Erfolg"
                }
            };
            for(var type in messageTypes){
                messages[type].forEach(function (msg) {
                    var htmlMsg=$('<div class="alert '+messageTypes[type]["typeClass"]+' alert-dismissible" role="alert">' +
                    '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
                    '<span aria-hidden="true">&times;</span>' +
                    '</button>' +
                    '<strong>'+messageTypes[type]["title"]+'</strong> ' + msg+
                    '</div>');
                    $("main").prepend(htmlMsg);
                });
            }
        }
    });

    /** Neue Frucht **/
    $("#newFruitPhoto").on("click",function(e){
        e.preventDefault();
        $("#fruitphoto").trigger("click");
    });

    $("#fruitphoto").on("change",function(){
        var data = new FormData();
        data.append($(this).attr("name"), this.files[0]);
        $(this).val(""); //IE-Bug

        var formular = $(this).parents("form");
        var targetUrl = formular.attr("action");
        
        $.ajax({
            url: targetUrl,
            data: data,
            cache: false,
            method: formular.attr("method"),
            contentType: false,
            processData: false,
            type: 'POST',
            success: function (data) {
                $("#fruit_label").attr("src","data:image/jpg;base64,"+data["preview"]);
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2VuZC5taW4uanMiLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJiYWNrZW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAvKiogR2xvYmFsZXIgTWVzc2FnZSBIYW5kbGVyICoqL1xuICAgIC8vQUpBWC1SZXNwb25zZT09SlNPTlttc2ddP3NldCBtZXNzYWdlXG4gICAgJChkb2N1bWVudCkuYWpheFN1Y2Nlc3MoZnVuY3Rpb24gKGUsIHJlcSkge1xuICAgICAgICBpZiAocmVxLnJlc3BvbnNlSlNPTiAmJiByZXEucmVzcG9uc2VKU09OLm1zZyAmJiByZXEucmVzcG9uc2VKU09OLm1zZy5zdWNjZXNzICYmIHJlcS5yZXNwb25zZUpTT04ubXNnLndhcm5pbmcgJiYgcmVxLnJlc3BvbnNlSlNPTi5tc2cuZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlcz1yZXEucmVzcG9uc2VKU09OLm1zZztcbiAgICAgICAgICAgIHZhciBtZXNzYWdlVHlwZXM9e1xuICAgICAgICAgICAgICAgIGVycm9yOntcbiAgICAgICAgICAgICAgICAgICAgdHlwZUNsYXNzOlwiYWxlcnQtZGFuZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZlaGxlclwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3YXJuaW5nOntcbiAgICAgICAgICAgICAgICAgICAgdHlwZUNsYXNzOlwiYWxlcnQtd2FybmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJBY2h0dW5nXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6e1xuICAgICAgICAgICAgICAgICAgICB0eXBlQ2xhc3M6XCJhbGVydC1zdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkVyZm9sZ1wiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvcih2YXIgdHlwZSBpbiBtZXNzYWdlVHlwZXMpe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzW3R5cGVdLmZvckVhY2goZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbE1zZz0kKCc8ZGl2IGNsYXNzPVwiYWxlcnQgJyttZXNzYWdlVHlwZXNbdHlwZV1bXCJ0eXBlQ2xhc3NcIl0rJyBhbGVydC1kaXNtaXNzaWJsZVwiIHJvbGU9XCJhbGVydFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cImFsZXJ0XCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAgICAgICc8c3Ryb25nPicrbWVzc2FnZVR5cGVzW3R5cGVdW1widGl0bGVcIl0rJzwvc3Ryb25nPiAnICsgbXNnK1xuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoXCJtYWluXCIpLnByZXBlbmQoaHRtbE1zZyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKiBOZXVlIEZydWNodCAqKi9cbiAgICAkKFwiI25ld0ZydWl0UGhvdG9cIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKGUpe1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQoXCIjZnJ1aXRwaG90b1wiKS50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgfSk7XG5cbiAgICAkKFwiI2ZydWl0cGhvdG9cIikub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBkYXRhLmFwcGVuZCgkKHRoaXMpLmF0dHIoXCJuYW1lXCIpLCB0aGlzLmZpbGVzWzBdKTtcbiAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7IC8vSUUtQnVnXG5cbiAgICAgICAgdmFyIGZvcm11bGFyID0gJCh0aGlzKS5wYXJlbnRzKFwiZm9ybVwiKTtcbiAgICAgICAgdmFyIHRhcmdldFVybCA9IGZvcm11bGFyLmF0dHIoXCJhY3Rpb25cIik7XG4gICAgICAgIFxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiB0YXJnZXRVcmwsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgbWV0aG9kOiBmb3JtdWxhci5hdHRyKFwibWV0aG9kXCIpLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2ZydWl0X2xhYmVsXCIpLmF0dHIoXCJzcmNcIixcImRhdGE6aW1hZ2UvanBnO2Jhc2U2NCxcIitkYXRhW1wicHJldmlld1wiXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=